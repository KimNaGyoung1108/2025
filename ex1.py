import streamlit as st

st.title("π©Ί μ¦μƒ κΈ°λ° κ±΄κ°• λ„μ°λ―Έ")
st.write("β οΈ μ΄ μ•±μ€ μ°Έκ³ μ© μ΅°μ–Έλ§ μ κ³µν•©λ‹λ‹¤. μ •ν™•ν• μ§„λ‹¨μ€ λ°λ“μ‹ μλ£κΈ°κ΄€μ—μ„ λ°›μΌμ„Έμ”.")

# ν‚¤μ›λ“ λ§¤ν•‘ (λ‹¤μ–‘ν• ν‘ν„ β†’ λ€ν‘ μ¦μƒ)
symptom_keywords = {
    "λ‘ν†µ": ["λ‘ν†µ", "λ¨Έλ¦¬ μ•„ν", "λ¨Έλ¦¬κ°€ μ±μ‹ ", "λ¨Έλ¦¬κ°€ λµν•΄", "νΈλ‘ν†µ", "λ¨Έλ¦¬κ°€ μ§€λ"],
    "λ³µν†µ": ["λ³µν†µ", "λ°° μ•„ν", "μ†μ΄ μ“°λ ¤", "μ„κ°€ μ•„ν", "μ¥μ— ν†µμ¦", "μ†μ΄ λ”λ¶€λ£©"],
    "κΈ°μΉ¨": ["κΈ°μΉ¨", "μ½λ΅", "λ©μ΄ μ•„ν", "κ°€λ", "κΈ°μΉ¨μ΄ μ‹¬ν•΄"],
    "λ°μ—΄": ["λ°μ—΄", "μ—΄", "μ²΄μ¨ μ¬λΌκ°", "κ³ μ—΄", "μ—΄μ΄ λ‚λ‹¤"],
    "μ–΄μ§€λΌμ¦": ["μ–΄μ§€λ½λ‹¤", "λΉ™κΈ€λΉ™κΈ€", "ν„κΈ°μ¦", "λ¨Έλ¦¬κ°€ ν•‘ λλ‹¤"],
    "κ°€μ΄ν†µμ¦": ["κ°€μ΄ μ•„ν", "ν‰ν†µ", "κ°€μ΄ λ‹µλ‹µ", "κ°€μ΄μ΄ μ΅°μ—¬μ΄"],
    "νΈν΅κ³¤λ€": ["μ¨μ°¨λ‹¤", "νΈν΅κ³¤λ€", "μ¨μ‰¬κΈ° νλ“¤λ‹¤", "κ°€μ νΈν΅"],
    "μ„¤μ‚¬": ["μ„¤μ‚¬", "λ°°κ°€ μμ£Ό μ•„νμ„ ν™”μ¥μ‹¤ κ°", "λ¬½μ€ λ³€", "μ¥μ— νƒ"],
    "ν”Όλ΅κ°": ["ν”Όκ³¤ν•λ‹¤", "λ¬΄κΈ°λ ¥", "κΈ°μ΄ μ—†μ", "μ‰½κ² μ§€μΉ¨", "ν”Όλ΅κ°"],
    "μ²΄μ¤‘κ°μ†": ["μ²΄μ¤‘μ΄ μ¤„μ—λ‹¤", "μ‚΄μ΄ λΉ μ§", "κ°‘μκΈ° λ§λ¦„", "μ²΄μ¤‘κ°μ†"]
}

# μ¦μƒ-μ§ν™ λ§¤ν•‘
symptom_disease_map = {
    "λ‘ν†µ": {
        "possible_diseases": ["κΈ΄μ¥μ„± λ‘ν†µ", "νΈλ‘ν†µ", "κ°κΈ°"],
        "advice": "π’΅ μ¶©λ¶„ν• ν΄μ‹κ³Ό μλ¶„ μ„­μ·¨λ¥Ό ν•μ„Έμ”. μ¦μƒμ΄ μ§€μ†λλ©΄ λ³‘μ›μ„ λ°©λ¬Έν•μ„Έμ”."
    },
    "λ³µν†µ": {
        "possible_diseases": ["μ†ν™”λ¶λ‰", "μ„μ—Ό", "μ¥μ—Ό", "κ³Όλ―Όμ„± λ€μ¥ μ¦ν›„κµ°"],
        "advice": "π’΅ μκ·Ήμ μΈ μμ‹μ„ ν”Όν•μ„Έμ”. ν†µμ¦μ΄ μ‹¬ν•κ±°λ‚ μ¤λκ°€λ©΄ λ³‘μ›μ„ κ¶μ ν•©λ‹λ‹¤."
    },
    "κΈ°μΉ¨": {
        "possible_diseases": ["κ°κΈ°", "κΈ°κ΄€μ§€μ—Ό", "μ²μ‹", "νλ ΄"],
        "advice": "π’΅ λ”°λ»ν• λ¬Όμ„ λ§μ‹κ³ , 2μ£Ό μ΄μƒ μ§€μ†λλ©΄ λ³‘μ›μ„ λ°©λ¬Έν•μ„Έμ”."
    },
    "λ°μ—΄": {
        "possible_diseases": ["λ…κ°", "νλ ΄", "μ½”λ΅λ‚19", "κ°μ—Όμ„± μ§ν™"],
        "advice": "π’΅ μ²΄μ¨μ„ ν™•μΈν•μ„Έμ”. 38λ„ μ΄μƒ κ³ μ—΄μ΄ μ§€μ†λλ©΄ μ¦‰μ‹ μ§„λ£κ°€ ν•„μ”ν•©λ‹λ‹¤."
    },
    "μ–΄μ§€λΌμ¦": {
        "possible_diseases": ["λΉν", "μ €νμ••", "λ©”λ‹μ—λ¥΄λ³‘", "νμ•΅μν™ μ¥μ• "],
        "advice": "π’΅ μ¶©λ¶„ν μ‰¬κ³ , λ°λ³µλλ©΄ λ³‘μ›μ„ λ°©λ¬Έν•μ„Έμ”."
    },
    "κ°€μ΄ν†µμ¦": {
        "possible_diseases": ["ν‘μ‹¬μ¦", "μ‹¬κ·Όκ²½μƒ‰", "μ—­λ¥μ„± μ‹λ„μ—Ό"],
        "advice": "π’΅ ν‰ν†µμ΄ μ‹¬ν•κ±°λ‚ μ™Όμ½ ν”/ν„±μΌλ΅ ν†µμ¦μ΄ νΌμ§€λ©΄ μ¦‰μ‹ μ‘κΈ‰μ‹¤λ΅ κ°€μ•Ό ν•©λ‹λ‹¤."
    },
    "νΈν΅κ³¤λ€": {
        "possible_diseases": ["μ²μ‹", "νλ ΄", "λ§μ„±νμ‡„μ„±νμ§ν™(COPD)", "μ‹¬λ¶€μ „"],
        "advice": "π’΅ νΈν΅μ΄ λ¶νΈν•λ©΄ μ‘κΈ‰ μƒν™©μΌ μ μμµλ‹λ‹¤. μ¦‰μ‹ μ§„λ£κ°€ ν•„μ”ν•©λ‹λ‹¤."
    },
    "μ„¤μ‚¬": {
        "possible_diseases": ["μ¥μ—Ό", "μ‹μ¤‘λ…", "κ³Όλ―Όμ„± λ€μ¥ μ¦ν›„κµ°"],
        "advice": "π’΅ μλ¶„μ„ μ¶©λ¶„ν μ„­μ·¨ν•μ„Έμ”. νλ³€μ΄λ‚ νƒμ μ¦μƒμ΄ μμΌλ©΄ λ³‘μ›μ— κ°€μ•Ό ν•©λ‹λ‹¤."
    },
    "ν”Όλ΅κ°": {
        "possible_diseases": ["λΉν", "κ°‘μƒμ„  μ§ν™", "μλ©΄ λ¶€μ΅±", "λ§μ„± ν”Όλ΅ μ¦ν›„κµ°"],
        "advice": "π’΅ μ¶©λ¶„ν μ‰¬κ³ , ν”Όλ΅κ°€ μ¥κΈ°κ°„ μ§€μ†λλ©΄ μ§„λ£λ¥Ό κ¶μ ν•©λ‹λ‹¤."
    },
    "μ²΄μ¤‘κ°μ†": {
        "possible_diseases": ["κ°‘μƒμ„  ν•­μ§„μ¦", "λ‹Ήλ‡¨λ³‘", "μ•”", "λ§μ„± κ°μ—Ό"],
        "advice": "π’΅ μ›μΈ λ¨λ¥Ό μ²΄μ¤‘ κ°μ†λ” λ°λ“μ‹ λ³‘μ›μ—μ„ κ²€μ‚¬κ°€ ν•„μ”ν•©λ‹λ‹¤."
    }
}

# μ‚¬μ©μ μ…λ ¥
user_input = st.text_input("ν„μ¬ μ¦μƒμ„ κµ¬μ²΄μ μΌλ΅ μ…λ ¥ν•μ„Έμ”:")

if st.button("ν™•μΈν•κΈ°"):
    matched_symptom = None
    for main_symptom, keywords in symptom_keywords.items():
        for word in keywords:
            if word in user_input:
                matched_symptom = main_symptom
                break
        if matched_symptom:
            break

    if matched_symptom:
        info = symptom_disease_map[matched_symptom]
        st.subheader(f"π©Ί μ…λ ¥ μ¦μƒ λ¶„λ¥: {matched_symptom}")
        st.write("π” μμ‹¬λλ” μ§ν™:")
        for d in info["possible_diseases"]:
            st.write(f"- {d}")
        st.info(info["advice"])
    elif user_input.strip() == "":
        st.warning("β οΈ μ¦μƒμ„ μ…λ ¥ν•΄μ£Όμ„Έμ”.")
    else:
        st.error("β“ ν•΄λ‹Ή μ¦μƒμ€ λ°μ΄ν„°μ— μ—†μµλ‹λ‹¤. κ°€κΉμ΄ λ³‘μ›μ„ λ°©λ¬Έν•μ„Έμ”.")
